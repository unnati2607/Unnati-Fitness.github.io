"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11940],{11940:function(e,t,o){o.d(t,{VL:function(){return Q}});var n=o(5152),i=o(67294),r=o(42671),s=o(95051),a=o(52087),c=o(63542),l=o(74937),d=o(85138),u=o(76023),p=o(92809),f=o(30266),v=o(809),m=o.n(v),g=o(40821),C=o(44828),y=o(81391),T=o(87883),b=o(30401),w=o(26231),S=o(65014),h=o(3263),O=o(43820),I=o(67974),A=o(70802),P=o(87686),k=o(28302),j=o(58682),x=o(43224),D=function(e){var t=e.queryParams;return(0,C.nS)({queryParams:t}).formattedUrl};function _(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function M(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?_(Object(o),!0).forEach((function(t){(0,p.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var E=function(e){var t=e.assetId,o=e.asset,n=o.id,i=o.tier,r=void 0===i?10:i,s=o.src,a=o.aspect,c=o.width,l=o.height;return{metadata:{notes:{media_id:t,alpha_num_id:n,rex_id:n,media_type:T.gP,tier:r,media:{aspect:a,width:c,height:l,url:s}}}}},U=function(){var e=(0,f.Z)(m().mark((function e(t){var o,n,i,r,s,c,l,d,u,p,f,v,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isRexEditorial,i=t.collectionId,r=t.verificationCode,s=t.setAsCover,c=t.firstAsset,l=t.collectionType,(d=(0,a.A8)(c))===T.VT){e.next=4;break}return e.abrupt("return");case 4:return u={id:i,verificationCode:r,collectionType:l},p=(0,C.Yz)({queryParams:u}).formattedUrl,e.next=8,k.uS.get(p).then((function(e){return(0,j.O)(e.data)||{}}));case 8:if(null!==(f=e.sent)&&void 0!==f&&null!==(o=f.coverItem)&&void 0!==o&&o.id){e.next=14;break}return v=(0,a.OP)({asset:c,isRexEditorial:n}),g=(0,O.Q)({collectionId:i,mappedAssetType:d,assetId:v}),e.next=14,s({collection:{id:i},mediaItem:{id:g}});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=o(54887),R=o(67126),Z=o(91164),J=o(85893),B=["isOpen"];function N(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var q=(0,n.default)((function(){return Promise.all([o.e(79351),o.e(55296),o.e(52387),o.e(38799),o.e(39803),o.e(11514),o.e(42930),o.e(15577),o.e(24122),o.e(49665)]).then(o.bind(o,16436)).then((function(e){return e.CollectionModal}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[16436]},modules:["../components/Collections/AddToCollectionsViews/DynamicCollectionModal.jsx -> ./CollectionModal"]}}),L=function(e){var t=e.isOpen,o=(0,Z.Z)(e,B);return(0,u.B)(t)&&(0,J.jsx)(q,function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?N(Object(o),!0).forEach((function(t){(0,p.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):N(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({isOpen:t},o))},G=(0,n.default)((function(){return o.e(46363).then(o.bind(o,46363)).then((function(e){return e.LazyAddToCollectionModal}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[46363]},modules:["../components/Collections/AddToCollectionsViews/useAddToCollectionViews.jsx -> @/components/AddToCollectionModal/lazy"]}}),z=(0,n.default)((function(){return o.e(11324).then(o.bind(o,11324)).then((function(e){return e.Snackbar}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[11324]},modules:["../components/Collections/AddToCollectionsViews/useAddToCollectionViews.jsx -> ./Snackbar"]}}),H=function(e){var t=e.assets,o=e.assetType,n=e.collectionId,s=e.collectionTitle,a=e.gridItems,c=e.isDialogActive,l=e.isSnackBarOpen,p=e.onAddToCollections,f=e.onAlertSnackbarClose,v=e.onAddToCollectionsComplete,m=e.redirectToCDPAction,g=e.setIsDialogActive,C=e.showCopyToModalTitle,y=e.status,T=e.verificationCode,b=(0,R.p)(r.vb),w=(0,u.B)(t),S=(0,d.D)().isBrandSstk,h=(0,i.useCallback)((function(){return g(!1)}),[g]);return w?b&&!S?(0,J.jsx)(G,{onClose:h,isOpen:c,items:t,onAddToCollectionsComplete:v}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(L,{assets:t,assetType:o,collectionId:n,gridItems:a,isOpen:c,onAddToCollections:p,setIsDialogActive:g,showCopyToModalTitle:C}),(0,J.jsx)(z,{assetType:o,collectionId:n,collectionTitle:s,isOpen:l,onAlertSnackbarClose:f,redirectToCDPAction:m,status:y,verificationCode:T})]}):null};H.defaultProps={assetType:"",assets:null,gridItems:null,onAddToCollectionsComplete:void 0,redirectToCDPAction:{}};var Q=function(e){var t=e.initialAssetType,o=(0,i.useState)(!1),n=o[0],r=o[1],u=(0,i.useState)(!1),v=u[0],j=u[1],_=(0,i.useState)(!1),R=_[0],Z=_[1],J=(0,i.useState)(""),B=J[0],N=J[1],q=(0,i.useState)(null),L=q[0],G=q[1],z=(0,i.useState)(t),Q=z[0],Y=z[1],F=(0,i.useState)(null),W=F[0],X=F[1],K=(0,i.useState)(null),$=K[0],ee=K[1],te=(0,i.useState)(null),oe=te[0],ne=te[1],ie=(0,V.B)(),re=(0,c.c)(),se=(0,l.L)(),ae=(0,i.useState)({shouldHandleRedirect:!1,redirectToCollectionDetailsPage:se}),ce=ae[0],le=ae[1],de=function(){var e=(0,i.useState)({status:"",error:void 0}),t=e[0],o=e[1],n=(0,i.useState)(""),r=n[0],s=n[1],c=(0,i.useState)(""),l=c[0],u=c[1],v=(0,A.J)(),j=(0,x.w)().setAsCover,_=(0,d.D)().isBrandSstk,V=(0,P.yh)().analytics,R=(0,S.UM)(V);return{add:(0,i.useCallback)(function(){var e=(0,f.Z)(m().mark((function e(t){var n,i,r,c,l,d,f,S,A,P,x,V,Z,J,B,N,q,L,G,z,H,Q,Y,F;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.assets,i=t.assetType,r=t.gridItems,c=t.groupedOptions,l=t.id,d=t.title,f=t.verificationCode,S=t.pageSection,A=t.listId,P=(0,h.wZ)({assetType:i,isBrandSstk:_}),e.prev=2,o({status:y.MR,error:void 0}),x=(0,a.Xo)(i),V=l,Z=f,c&&c.length&&(J=c.find((function(e){return e.title===d})))&&(V=J.id,Z=J.verificationCode),V){e.next=19;break}return B=(0,C.A6)().formattedUrl,N={data:{attributes:{title:d,collectionType:P,isPublic:!1},type:b.Ul}},e.next=13,k.uS.post(B,N);case 13:q=e.sent,L=q.data,G=L.id,z=L.attributes.verificationCode,V=G,Z=z;case 19:return H={data:n.map((function(e){var t=(0,a.OP)({asset:e,isRexEditorial:x}),o=(0,a.A8)(e);return M({type:b.A8,id:(0,O.Q)({collectionId:V,mappedAssetType:o,assetId:t})},o===T.VT&&E({assetId:t,asset:e}))}))},Q=(0,C.mp)({urlParams:{id:V},queryParams:{isRexEditorial:x}}).formattedUrl,Y=(0,I.y)(R),e.next=24,k.uS.post(Q,H,Y?{headers:(0,p.Z)({},w.as,Y)}:void 0);case 24:return F=n[0],e.next=27,U({isRexEditorial:x,collectionId:V,verificationCode:Z,setAsCover:j,firstAsset:F,collectionType:P});case 27:v({collectionId:V,collectionName:d,gridItems:r,assets:n,pageSection:S,listId:A}),s(V),u(Z),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(2),o({status:y.cM,error:e.t0});case 35:return e.prev=35,e.next=38,(0,g.JG)(D({queryParams:{"filter[type]":P}}));case 38:return e.finish(35);case 39:case"end":return e.stop()}}),e,null,[[2,32,35,39]])})));return function(t){return e.apply(this,arguments)}}(),[v,j,R,_]),collectionId:r,setStatus:o,status:t,verificationCode:l}}(),ue=de.add,pe=de.status,fe=de.collectionId,ve=de.verificationCode;(0,i.useEffect)((function(){return function(){return G(null)}}),[]),(0,i.useEffect)((function(){return function(){return Y("")}}),[]);var me=(0,i.useCallback)((function(e){var t=e.formattedAssets,o=e.gridItems,n=e.isCopyToCollection,i=e.mappedAssetType,s=e.redirectToCollectionDetailsPage,a=e.pageSection,c=e.listId;Y(i),G(t),ee(a),ne(c),n&&Z(!0),o&&X(o),s&&le({shouldHandleRedirect:!0,redirectToCollectionDetailsPage:s}),r(!0)}),[]);return(0,i.useEffect)((function(){(0,s.DZ)({showAddToCollectionModal:me,isLoggedInUser:ie})}),[ie,me]),{addToCollectionViewsProps:(0,i.useMemo)((function(){return{assets:L,assetType:Q,collectionId:fe,collectionTitle:B,gridItems:W,isDialogActive:n,isSnackBarOpen:v,onAddToCollections:function(e){var t=e.id,o=e.title,n=e.verificationCode,i=e.groupedOptions,s=e.pageSection;return N(o),r(!1),j(!0),ue({assetType:Q,assets:L,gridItems:W,groupedOptions:i,id:t,title:o,verificationCode:n,pageSection:s||$,listId:oe})},onAlertSnackbarClose:function(){return j(!1)},redirectToCDPAction:ce,setIsDialogActive:r,showCopyToModalTitle:R,status:pe,verificationCode:ve}}),[L,W,ue,oe,$,Q,fe,B,n,v,ce,R,pe,ve]),addToCollectionViewsHandler:(0,i.useCallback)((function(e){var t=e.assets,o=e.gridItems,n=e.isCopyToCollection,i=void 0!==n&&n,r=e.redirectToCollectionDetailsPage,c=e.pageSection,l=e.listId;if(ie){var d=function(e){return[].concat(e)}(t);me({formattedAssets:d,gridItems:o,isCopyToCollection:i,mappedAssetType:(0,a.A8)(d[0]),redirectToCollectionDetailsPage:r,pageSection:c,listId:l})}else(0,s.JO)({assets:t,gridItems:o,signUpPath:re})}),[ie,me,re]),AddToCollectionViews:H}}},95051:function(e,t,o){o.d(t,{JO:function(){return s},DZ:function(){return a}});var n=o(52087),i="add_to_collection_asset",r="add_to_collection_grid_items",s=function(e){var t=e.assets,o=e.gridItems,n=e.signUpPath;window&&(t&&window.sessionStorage.setItem(i,JSON.stringify(t)),o&&window.sessionStorage.setItem(r,JSON.stringify(o)),window.location=n)},a=function(e){var t=e.showAddToCollectionModal,o=e.isLoggedInUser;if(void 0!==o){if(o){var s=window.sessionStorage.getItem(i),a=window.sessionStorage.getItem(r),c=function(e){return e&&"undefined"!==e};if(c(s)&&c(a)){var l=JSON.parse(s),d=JSON.parse(a),u=[].concat(l);t({formattedAssets:u,gridItems:d,mappedAssetType:(0,n.A8)(u[0]),isCopyToCollection:!1,redirectToCollectionDetailsPage:!1})}}window.sessionStorage.removeItem(i),window.sessionStorage.removeItem(r)}}},67974:function(e,t,o){o.d(t,{y:function(){return n}});var n=function(e){return[e.subPage,e.pageType].join("-")}},70802:function(e,t,o){o.d(t,{J:function(){return a}});var n=o(67294),i=o(65014),r=o(87686),s=o(95101),a=function(){var e=(0,r.yh)().analytics,t=(0,s.Y)().getSearchContext;return(0,n.useCallback)((function(o){var n=o.collectionId,r=o.collectionName,s=o.gridItems,a=o.assets,c=o.pageSection,l=o.listId;e.productAddedToWishlist({products:a.map((function(e){return(0,i.bR)({asset:e,getSearchContext:t,gridItems:s,pageSection:c})})),wishlist_id:n,wishlist_name:r,list_id:null!==l&&void 0!==l?l:""})}),[e,t])}},43224:function(e,t,o){o.d(t,{w:function(){return u}});var n=o(30266),i=o(809),r=o.n(i),s=o(67294),a=o(44828),c=o(81391),l=o(30401),d=o(28302),u=function(){var e=(0,s.useState)({status:"",error:void 0}),t=e[0],o=e[1],i=(0,s.useCallback)(function(){var e=(0,n.Z)(r().mark((function e(t){var n,i,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collection,i=t.mediaItem,s=(0,a.df)({urlParams:{id:n.id}}).formattedUrl,u={data:{id:n.id,relationships:{"cover-item":{data:{id:"".concat(i.id),type:l.A8}}},type:l.Ul}},e.prev=3,o({status:c.MR,error:void 0}),e.next=7,d.uS.patch(s,u);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),o({status:c.cM,error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),[]);return{status:t,setStatus:o,setAsCover:i}}}}]);