"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68423],{81217:function(e,t,n){n.d(t,{Z:function(){return i},K:function(){return a}});var r=n(11987),i=function(){var e="/email/ss_premier_sub_account_activation_email";return{url:e,formattedUrl:(0,r.format)({pathname:e})}},a=function(){var e="/email/premier_cart_confirmation";return{url:e,formattedUrl:(0,r.format)({pathname:e})}}},68423:function(e,t,n){n.d(t,{Z:function(){return H}});var r,i=n(30266),a=n(86818),s=n(92809),o=n(809),c=n.n(o),u=n(67294),l=n(15313),d=n(44828),p=n(81391),m=n(87883),v=n(60969),f=n(85406),b=n(60996),y=n(20559),g=n(46254),h=n(53558),_=n(48483),O=n(52087),I=n(28302),C=function(e){var t,n=e.assets,r=void 0===n?[]:n,i=e.user,s=function(e){var t=e.assets,n={};return t.forEach((function(e){var t=(0,O.Tp)(e),r=(0,b.JD)({assetId:e.id,assetType:t});n[r]=[].concat((0,a.Z)(n[r]?n[r]:[]),[e])})),n}({assets:r});return null===(t=Object.values(s))||void 0===t?void 0:t.map((function(e){var t=function(e){var t,n=e.assets,r=(0,O.Tp)(n[0]);return{include:"subscriptions",content_type:(0,b.JD)({assetType:r,assetId:null===(t=n[0])||void 0===t?void 0:t.id}),content_ids:n.reduce((function(e,t){return[].concat((0,a.Z)(e),[t.id.toString()])}),[]).join(",")}}({assets:e}),n=(0,d.Td)({urlParams:{licenseeIdentifier:"organization-".concat(null===i||void 0===i?void 0:i.organizationId)},queryParams:t}).formattedUrl;return I.uS.get(n)}))},j=function(e){var t=e.data,n=[];return t.map((function(e){var t=e.id.split("-"),r=t[t.length-1],i=function(e){var t=e.assetEligibility,n=t.permittedLicenses,r=t.subscriptions;return null===r||void 0===r?void 0:r.filter((function(e){var t=e.license;return n.includes(t.replace("_unlimited",""))}))}({assetEligibility:e});return n.push({assetId:r,subscriptions:i})})),n},S=n(58682),w=n(76253),P=n(65014),E=n(87686),T=n(20468),Z=n(54887),k=n(82674),N=n(43267),L=n(53554),M=n.n(L),A=n(81217),D="noticeError",x=n(57880),z=n(79017),R=n(76382),U=n(80454),q=n(15938),F=new RegExp(M()),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.emailCartCheckoutConfirmation,n=e.orderEmail;return t&&n?n.split(",").filter((function(e){return F.test(e)})):[]},B=function(e){var t=e.purchaseOrder;return"".concat(null===t||void 0===t?void 0:t[0]," : ").concat(null===t||void 0===t?void 0:t[1]).split(" ").map((function(e){return(0,z.k)(e)})).join(" ")},Y=function(e){var t=e.t,n=e.keys,r=n.currentYear,i=n.emailAddress,a=n.purchaseOrder;return{copyright:t("site-footer:copyright",{CURRENT_YEAR:r}),emailSentTo:t("ent:email_sent_to",{EMAIL_ADDRESS:i}),emailSubjectLine:"".concat(t("ent:order_confirmation_email_subject")," | ").concat(B({purchaseOrder:a})),name:t("account:profile_name"),needAssistance:t("ent:contact_sales_representative"),orderConfirmation:t("ent:order_confirmation"),purchaseInformation:t("ent:purchase_information_key"),shutterstockAddress:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l2"),shutterstockInc:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l1"),subtotal:t("ent:order_confirmation_email_subtotal"),thisIsNotAnInvoice:t("ent:not_an_invoice")}},$=n(28323);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=(r={},(0,s.Z)(r,v.td,d.CE),(0,s.Z)(r,v.zM,d.s0),r),X=function(e){var t=e.asset,n=e.subscriptions,r=(0,b.qw)({asset:t}),i=t.licenseId,s=t.contentTier;switch(r){case m.pX:return(0,_.I9)({assetType:m.pX,subscriptions:[].concat((0,a.Z)(null===n||void 0===n?void 0:n.videoSubscriptions),(0,a.Z)(null===n||void 0===n?void 0:n.videoCompSubscriptions)),selectedLicenseId:i});case m.xF:case m.j0:return(0,_.$L)({subscriptions:[].concat((0,a.Z)(n.musicSubscriptions),(0,a.Z)(n.musicCompSubscriptions)),licenseName:t.licenseId});case m.gP:return(0,_.$L)({subscriptions:[].concat((0,a.Z)(n.editorialImageSubscriptions),(0,a.Z)(n.editorialImageCompSubscriptions),(0,a.Z)(n.editorialVideoSubscriptions),(0,a.Z)(n.editorialVideoCompSubscriptions)),licenseName:t.licenseId,contentTier:s});case m.k4:default:return(0,_.$L)({subscriptions:[].concat((0,a.Z)(n.imageSubscriptions),(0,a.Z)(n.imageCompSubscriptions)),licenseName:t.licenseId,contentTier:s})}},H=function(){var e=(0,k.av)().data,t=(0,u.useState)(!1),n=t[0],r=t[1],s=(0,u.useState)(""),o=s[0],d=s[1],m=(0,u.useState)({}),O=m[0],L=m[1],M=(0,Z.j)().data,z=(0,l.I0)(),F=function(){var e=(0,E.yh)().analytics;return(0,u.useCallback)((function(t){var n=t.assets,r=void 0===n?[]:n;e.productLicensed({products:r.map((function(e){return(0,P.bR)({asset:e,shouldGetSearchContextFromAsset:!0})}))})}),[e])}(),B=(0,T.o)(),G=(0,$.G)(),H=(0,f.PE)().locale,Q=function(){var e=(0,N.$G)(x.jp5).t,t=(0,Z.j)().data,n=(0,U.b)().data,r=(0,R.B)().data,i=(0,q.z)({fetchTrigger:!0})||{},s=i.name,o=i.email,c=i.phone,l=(0,f.PE)(),d=l.locale,p=l.fullLocale,m=(0,T.o)();return{sendOrderConfirmationEmails:(0,u.useCallback)((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=i.cartTotalCurrency,l=i.filteredOrderMetadata,v=i.licenseMetadata,f=i.priceType,b=[].concat((0,a.Z)(null!==n&&void 0!==n&&n.emailCartCheckoutConfirmation?[null===t||void 0===t?void 0:t.email]:[]),(0,a.Z)(V(r)));if(!!b.length&&null!==l&&void 0!==l&&l.length){var y=Y({t:e,keys:{currentYear:(new Date).getFullYear(),emailAddress:null===t||void 0===t?void 0:t.email,purchaseOrder:Object.entries(v)[0],repName:s,repPhoneNumber:c,repEmail:o}});try{var g={licenseMetadata:v,cartItems:l,invoiceDate:new Intl.DateTimeFormat(p).format(new Date),totalAmount:m({price:l.reduce((function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).price}),0),localeCurrencyOverride:u,priceType:f}),fullName:null===t||void 0===t?void 0:t.fullName,labels:y,repName:s,repPhoneNumber:c,repEmail:o};I.IZ.post((0,A.K)().formattedUrl,{emails:(0,a.Z)(new Set(b)),emailBody:g,emailSubject:"".concat(y.emailSubjectLine),language:d})}catch(j){var h,_,O,C;null===(h=window.NREUM)||void 0===h||null===(_=h.setTransactionName)||void 0===_||_.call(h,"sendOrderConfirmationEmail/".concat(D)),null===(O=window.NREUM)||void 0===O||null===(C=O.noticeError)||void 0===C||C.call(O,j,{message:"Failed sending order confirmation emails to: ".concat(b.join(", "))})}}}),[p,d,r,m,o,s,c,e,null===t||void 0===t?void 0:t.email,null===t||void 0===t?void 0:t.fullName,null===n||void 0===n?void 0:n.emailCartCheckoutConfirmation])}}().sendOrderConfirmationEmails;return{isLicensing:n,licensingAssetsHandler:(0,u.useCallback)(function(){var t=(0,i.Z)(c().mark((function t(n){var a,s,o,u,l,m,f,O,P,E,T,Z,k,N,A,D,x,R,U,q,V,Y,$,W,ee,te,ne,re;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.alreadyLicensedAssets,s=void 0===a?[]:a,o=n.assets,u=void 0===o?[]:o,l=n.cartMetadata,m=void 0===l?{}:l,f=n.licenseeMetadata,O=void 0===f?{}:f,P=n.isVideoComp,E=void 0!==P&&P,T=n.licenseMetadata,Z=void 0===T?{}:T,k=n.licensingType,N=n.selectedAssetSize,A=void 0===N?"":N,R=function(){var t=(0,i.Z)(c().mark((function t(){var n,r,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(C({assets:u,user:M}));case 2:return n=t.sent.map((function(e){var t=e.data;return(0,S.O)(t)})).flat(),r=j({data:n}),a=u.map(function(){var e=(0,i.Z)(c().mark((function e(t){var n,i,a,s,o,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,b.qw)({asset:t}),i=t.licenseId,a=(null===r||void 0===r?void 0:r.find((function(e){return e.assetId===String(t.id)})))||{},s=a.subscriptions,o=(0,_.I9)({assetType:n,subscriptions:s,selectedLicenseId:i})||{},u=o.id,l=o.license,e.t0=J,e.t1=J,e.t2=J,e.t3={},e.next=10,(0,y.Oo)({asset:t,selectedAssetSize:A,licenseName:l,isVideoComp:E});case 10:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6=A&&h.Bg[A]&&{comp_size:A},e.t7=(0,e.t1)(e.t5,e.t6),e.t8={},e.t9={license_name:l,show_modal:!0,subscription_id:u},e.abrupt("return",(0,e.t0)(e.t7,e.t8,e.t9));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=7,Promise.all(a);case 7:return s=t.sent,t.abrupt("return",{licensingPayload:{content:s,license_metadata:Z,required_cookies:""},orderMetadata:u.map((function(t){var n=t.currency,r=t.description,i=t.descriptionLanguageMap,a=void 0===i?{}:i,s=t.id,o=t.itemType,c=t.headline,u=t.licenseId,l=t.preview,d=void 0===l?{}:l,p=t.price,m=t.priceType,v=t.src,f=t.thumb,b=t.thumbImageUrl,y=t.title,g=t.type,h=n,_=p,O=m;if(!h||!_||!O){var I=X({asset:t,subscriptions:e}),C=I.creditCurrency,j=I.creditPrice,S=I.creditType;h=h||C,_=_||j,O=m||S}return h&&!D&&(D=h),O&&!x&&(x=O),{description:a[H]||r,formattedPrice:B({price:_,localeCurrencyOverride:h,priceType:m}),headline:c,id:s,itemType:o,licenseId:u,licenseName:G({licenseName:u}),price:_,priceType:O,thumbnailSrc:v||b||d.url||f,title:y,type:g}}))});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=2,r(!0),d(""),t.next=7,R({assets:u.map((function(e){return e.mediaItem?J(J({},e.mediaItem),{},{licenseId:e.licenseId}):e})),isVideoComp:E,licenseMetadata:Z,selectedAssetSize:A,subscriptions:e});case 7:return V=t.sent,Y=V.licensingPayload,$=V.orderMetadata,W=K[k]({urlParams:{licenseeIdentifier:"organization-".concat(null===M||void 0===M?void 0:M.organizationId)}}).formattedUrl,t.next=13,I.uS.post(W,Y);case 13:return ee=t.sent,F({assets:u}),z(w.L6.setLicensedAssets({assets:u,metadata:m,licensedContent:(null===(U=(0,S.O)(ee.data))||void 0===U||null===(q=U.meta)||void 0===q?void 0:q.licensedContent)||[]})),u.some((function(e){var t=e.licenseId;return v.b5.includes(t)}))||(te=$.filter((function(e){return!(0,g.te)({alreadyLicensedAssets:s,asset:e})})),Q({cartTotalCurrency:D,filteredOrderMetadata:te,licenseMetadata:O,priceType:x})),d(p.MR),t.abrupt("return",ee);case 22:throw t.prev=22,t.t0=t.catch(2),L(null===(ne=t.t0.response)||void 0===ne||null===(re=ne.data)||void 0===re?void 0:re.details),d(p.cM),t.t0;case 27:return t.prev=27,r(!1),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[2,22,27,30]])})));return function(e){return t.apply(this,arguments)}}(),[z,G,H,B,F,Q,M,e]),licensingError:O,licensingStatus:o,setIsLicensing:r,setLicensingStatus:d}}},76382:function(e,t,n){n.d(t,{B:function(){return v}});var r=n(92809),i=n(40821),a=n(44828),s=n(60969),o=n(75874),c=n(24848),u=n(28302),l=n(58682),d=n(54887);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryParams,n=(0,d.j)(),r=n.data,p=m({target:s.dl,site_name:o.mC,setting_type:s.dl},t);return(0,i.ZP)((null===r||void 0===r?void 0:r.id)&&(null===r||void 0===r?void 0:r.organizationId)&&(0,a.nI)({queryParams:p}).formattedUrl,(function(e){return u.uS.get(e).then((function(e){return(0,l.O)(e.data)}))}),{dedupingInterval:c.yR})}}}]);