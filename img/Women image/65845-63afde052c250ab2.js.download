"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65845],{65845:function(e,n,t){t.d(n,{r:function(){return F}});var r=t(30266),s=t(809),i=t.n(s),a=t(67294),o=t(3263),c=t(22430),u=t(68423),l=t(76382),p=t(92809),d=t(91164),f=t(5152),m=t(76023),b=t(85893),g=["isOpen"];function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var O=(0,f.default)((function(){return Promise.all([t.e(79351),t.e(58858),t.e(87137),t.e(88698)]).then(t.bind(t,88698)).then((function(e){return e.CompLicensingDialog}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[88698]},modules:["../components/License/CompLicensingViews/DynamicCompLicensingDialog.jsx -> ./CompLicensingDialog"]}}),w=function(e){var n=e.isOpen,t=(0,d.Z)(e,g);return(0,m.B)(n)&&(0,b.jsx)(O,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,p.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({isOpen:n},t))},h=["isOpen"];function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var y=(0,f.default)((function(){return Promise.all([t.e(79351),t.e(65117),t.e(15577),t.e(24122),t.e(12894)]).then(t.bind(t,95842)).then((function(e){return e.CompLicensingDrawer}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[95842]},modules:["../components/License/CompLicensingViews/DynamicCompLicensingDrawer.jsx -> ./CompLicensingDrawer"]}}),S=function(e){var n=e.isOpen,t=(0,d.Z)(e,h);return(0,m.B)(n)&&(0,b.jsx)(y,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){(0,p.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({isOpen:n},t))},P=["isOpen"];function D(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var k=(0,f.default)((function(){return t.e(25307).then(t.bind(t,25307)).then((function(e){return e.CompLicensingSnackbar}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[25307]},modules:["../components/License/CompLicensingViews/DynamicCompLicensingSnackbar.jsx -> ./CompLicensingSnackbar"]}}),C=function(e){var n=e.isOpen,t=(0,d.Z)(e,P);return(0,m.B)(n)&&(0,b.jsx)(k,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?D(Object(t),!0).forEach((function(n){(0,p.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({isOpen:n},t))},x=t(43267),_=t(46254),L=t(57880),z=function(e){var n=e.assets,t=e.compLicensingHandler,r=e.isDialogOpen,s=e.isDrawerOpen,i=e.isLicensing,a=e.isSnackBarOpen,o=e.licensingError,c=e.onDialogClose,u=e.onDrawerClose,l=e.onSnackbarClose,p=e.selectedAssetSize,d=e.setSelectedAssetSize,f=e.settingsData,m=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).licensingError,n=void 0===e?{}:e,t=(0,x.$G)(L.clK).t;return{cancel:t("common:actions_cancel"),downloadComp:t("common:actions_download_comp"),enterpriseCompLicense:t("ent:license_enterprise_comp"),genericErrorMessage:t("ent:license_now_error_message"),licensingError:(0,_.j2)({error:n,t:t}),licenseSuccess:t("ent:confirmation_alert_message"),licenseFormLabels:{buttonLabel:t("common:actions_download_comp"),disclaimer:(0,b.jsx)(x.cC,{i18nKey:"ent:comp_disclaimer",ns:L.clK,components:{bold:(0,b.jsx)("strong",{})}}),metadataFound:t("ent:previous_metadata_found_comp"),metadataMissing:t("ent:previous_metadata_missing_comp"),title:t("ent:add_metadata_to_comp")}}}({licensingError:o});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{assets:n,isOpen:r,onClose:c,onLicense:t,labels:m,isLicensing:i,selectedAssetSize:p,setSelectedAssetSize:d,settingsData:f}),(0,b.jsx)(S,{assets:n,isLicensing:i,isOpen:s,labels:m,onClose:u,onLicense:t}),(0,b.jsx)(C,{isOpen:a,message:m.licensingError,onClose:l})]})};z.defaultProps={assets:null,isDialogOpen:!1,isDrawerOpen:!1,isLicensing:!1,isSnackBarOpen:!1,licensingError:{},selectedAssetSize:"",settingsData:{}};var E=t(96298),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.allowMetadata,t=void 0===n||n,s=(0,a.useState)(null),p=s[0],d=s[1],f=(0,a.useState)(""),m=f[0],b=f[1],g=(0,a.useState)(""),v=g[0],O=g[1],w=(0,a.useState)(!1),h=w[0],j=w[1],y=(0,a.useState)(!1),S=y[0],P=y[1],D=(0,a.useState)(!1),k=D[0],C=D[1],x=(0,u.Z)(),_=x.isLicensing,L=x.licensingError,F=x.licensingStatus,Z=x.setLicensingStatus,A=x.licensingAssetsHandler,U=(0,c.U)(),I=(0,l.B)(),B=I.data,G=(0,a.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(n){var t,r,s,a,o,c,u,l,p,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.assets,r=void 0===t?[]:t,s=n.assetSize,a=n.metadata,o=n.pageSection,c=n.listId,b(r[0].id),u=!1,e.prev=3,e.next=6,(0,E.qP)({assets:r,assetSize:s,metadata:a,selectedAssetSize:v});case 6:return l=e.sent,e.next=9,A(l);case 9:if(p=e.sent,d=p.data,(0,E.bj)(r)&&1===r.length){e.next=15;break}return e.next=14,(0,E.tX)({assets:r,licensedContent:null===d||void 0===d||null===(f=d.meta)||void 0===f?void 0:f.licensedContent});case 14:U({assets:r,isRedownload:!1,isQuickDownload:!1,isPaid:!1,isComp:!0,pageSection:o,listId:c});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),u=e.t0;case 20:return b(""),u&&!S&&C(!0),e.abrupt("return",{error:u});case 23:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(n){return e.apply(this,arguments)}}(),[S,A,U,v]),M=(0,a.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(n){var r,s,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.assets,s=n.assetSize,a=n.metadata,c=n.pageSection,u=n.listId,d(r),Z(""),!(!h&&(0,o.U0)(r))){e.next=7;break}return j(!0),e.abrupt("return",Promise.resolve(null));case 7:if(!(!S&&(null===B||void 0===B?void 0:B.requireMetadataForComp)&&!a)||!t){e.next=12;break}return s&&O(s),P(!0),e.abrupt("return",Promise.resolve(null));case 12:return e.abrupt("return",G({assets:r,assetSize:s,metadata:a,pageSection:c,listId:u}));case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,G,h,S,B,Z]),q=(0,a.useMemo)((function(){return{assets:p,compLicensingHandler:M,compLicensingRequest:G,isDialogOpen:h,isDrawerOpen:S,isLicensing:_,isSnackBarOpen:k,licensingError:L,onDialogClose:function(){return j(!1)},onDrawerClose:function(){return P(!1)},onSnackbarClose:function(){return C(!1)},selectedAssetSize:v,setSelectedAssetSize:O,settingsData:B}}),[p,M,G,h,S,_,k,L,v,B]);return{assetsToLicense:p,compLicensingHandler:M,compLicensingProps:q,CompLicensingViews:z,licensingAssetId:m,licensingStatus:F}}},96298:function(e,n,t){t.d(n,{SN:function(){return O},tX:function(){return w},qP:function(){return y},bj:function(){return S}});var r=t(92809),s=t(30266),i=t(809),a=t.n(i),o=t(3578),c=t(44828),u=t(87883),l=t(60969),p=t(55687),d=t(60996),f=t(52087),m=t(18937),b=t(28302);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=function(){var e=(0,s.Z)(a().mark((function e(n){var t,r,s,i,o,u,d,m,g,v,O,w,h,j,y,S,P,D,k,C,x,_,L;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.assets,r=n.licensedContent,s=n.supplementalUrlType,i=r[0]||{},o=i.downloadUrl,u=i.contentId,d=i.contentFormat,m=i.contentSize,g=i.supplementalUrls,v=i.licenseName,null===g||void 0===g||!g.length||!s){e.next=5;break}return O=g.find((function(e){return e.type===s}))||{},w=O.url,h=void 0===w?o:w,e.abrupt("return",h);case 5:if(j=l.b5.includes(v),y=t.find((function(e){return e.id===u}))||{},S=(0,f.Tp)(y),P=(0,p.G)({assets:t,contentId:u}),D=P.filename,k=P.shouldUpdateFilename,j||!k){e.next=22;break}return e.prev=10,e.next=13,b.uS.post((0,c.u8)().formattedUrl,{data:[{media_id:y.id,media_type:S,media_size:m,media_format:d,filename:D}]});case 13:return C=e.sent,x=C.data,_=(null===x||void 0===x?void 0:x.data[0])||{},L=_.attributes,e.abrupt("return",L.url||o);case 19:return e.prev=19,e.t0=e.catch(10),e.abrupt("return",o);case 22:return e.abrupt("return",o);case 23:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=(0,s.Z)(a().mark((function e(n){var t,r,s,i,c,u,l,d,f,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.assets,r=void 0===t?[]:t,s=n.licensedContent,!((i=void 0===s?[]:s).length>1)){e.next=10;break}return c=(0,p.r)({assets:r,licensedContent:i}),u=(0,o.e)({urlParams:{filename:c.bundleFilename}}).formattedUrl,e.next=6,b.jl.post(u,c.content);case 6:return l=e.sent,d=l.data,f=d.public_url,e.abrupt("return",(0,m.A_)(f));case 10:return e.next=12,O({assets:r,licensedContent:i});case 12:return g=e.sent,e.abrupt("return",(0,m.A_)(g));case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var n=(0,d.Fy)({asset:e});return v(v({},e),{},{assetType:n,licenseId:l._r[n]})}))},j=function(){var e=(0,s.Z)(a().mark((function e(){var n,t,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,c.d0)(),t=n.url,e.prev=1,e.next=4,b.uS.get(t).then((function(e){return null===e||void 0===e?void 0:e.data}));case 4:return s=e.sent,e.abrupt("return",s.reduce((function(e,n){return v(v({},e),{},(0,r.Z)({},n.name,"-"))}),{}));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,s.Z)(a().mark((function e(){var n,t,r,s,i,o,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>0&&void 0!==c[0]?c[0]:{},t=n.assets,r=n.assetSize,s=n.metadata,i=n.selectedAssetSize,o=s){e.next=6;break}return e.next=5,j();case 5:o=e.sent;case 6:return e.abrupt("return",{assets:h(t),licenseMetadata:o,licensingType:l.td,selectedAssetSize:r||i||"",isVideoComp:!0});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,d.qw)({asset:e[0]||{}})===u.j0}},55687:function(e,n,t){t.d(n,{G:function(){return o},r:function(){return c}});var r=t(52087),s=t(69465),i="shutterstock",a="shutterstock_editorial",o=function(e){var n=e.assets,t=e.contentId,s=function(e){var n=e.asset;return(0,r.PD)(n)?{prefix:"shutterstock_offset",shouldUpdateFilename:!0}:(0,r.tS)({asset:n})?{prefix:a,shouldUpdateFilename:!1}:{prefix:i,shouldUpdateFilename:!1}}({asset:n.find((function(e){return e.id===t}))||{}}),o=s.prefix,c=s.shouldUpdateFilename;return{filename:"".concat(o,"_").concat(t),shouldUpdateFilename:c}},c=function(e){var n=e.assets,t=void 0===n?[]:n,c=e.licensedContent,u=void 0===c?[]:c,l=t.every((function(e){return(0,r.tS)({asset:e})})),p=u.map((function(e){var n=e.contentId,r=e.downloadUrl,s=e.contentFormat,i=o({assets:t,contentId:n}).filename,a=r.split("/").pop().split(".").pop();return(a.length>4||a.length<2)&&(a=s),{filename:"".concat(i,".").concat(a),url:r}})),d=(0,s.zs)();return{bundleFilename:"".concat(l?a:i,"_").concat(d,".zip"),content:p}}}}]);